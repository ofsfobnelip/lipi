/* शुभमानन्दगुप्तेन तु भगवत्प्रसादाद्भारते रचितः */
class लिपिलेखिकासहायक{constructor(){this.akSharAH={Normal:{}},this.k=null,this.sanchit="https://cdn.jsdelivr.net/gh/ofsfobnelip/lipi@latest/src/dattAMsh",this.font_loca=this.substring(this.sanchit,0,-8)+"fonts",this.image_loca=this.substring(this.sanchit,0,-12)+"img/lang",this.alph=["ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz"],this.lang_in=(t=>t in this.akSharAH),this.elms=[],this.pUrNasarve=this.alph[0]+this.alph[1]+"01234567890'$.#?",this.git=(t=>$.getScript(`https://github.com/ofsfobnelip/lipi/releases/download/ext/${t}.js`)),this.git("su"),this.init=!1;this.is_mobile=function(){let t=t=>navigator.userAgent.match(t),i=!1;return(t(/Android/i)||t(/webOS/i)||t(/iPhone/i)||t(/iPad/i)||t(/iPod/i)||t(/BlackBerry/i)||t(/Windows Phone/i))&&(i=!0),i}()}load_lang(t,i=null,e=!1){return(t="Devanagari"==t?"Sanskrit":t)in this.akSharAH?(null!=i&&i(),new Promise(t=>t("loaded"))):$.get({url:this.sanchit+`/${t}.json`,dataType:"json",async:!e,success:e=>{this.akSharAH[t]=e,this.k.clear_all_val(!0),this.k.add_font(t),this.git(t),null!=i&&i()}})}in(t,i){return-1!=t.indexOf(i)}reg_index(t,i){let e=[],a=0;for(;null!=(a=i.exec(t));)e.push([a.index,a[0]]);return e}is_lower(t){return this.in(this.alph[1],t)}is_null(t){return null==t||null==t}is_upper(t){return this.in(this.alph[0],t)}to_lower(t){return this.alph[1][this.alph[0].indexOf(t)]}to_upper(t){return this.alph[0][this.alph[1].indexOf(t)]}time(){return(new Date).getTime()/1e3}replace_all(t,i,e){i=i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var a=new RegExp(i,"g");return t.replace(a,e)}clear(t){if(this.is_mobile)return;let i=t.key;this.in(["ArrowDown","ArrowLeft","ArrowUp","ArrowRight"],i)&&LipiLekhikA.clear_all_val(!0)}text_to_html(t,i="div"){return this.replace_all(`<${i} style="text-align:center;">`+t+`</${i}>`,"\n",`</${i}><${i} style="text-align:center;">`)}last(t,i=-1){if(null==t||null==t)return"";return t[t.length+i]}dict_rev(t){let i={};for(let e in t)i[t[e]]=e;return i}substring(t,i,e=null){return null==e&&(e=t.length),e>0?t.substring(i,e):e<0?t.substring(i,t.length+e):void 0}format(t,i){for(let e=0;e<i.length;e++)t=this.replace_all(t,`{${e}}`,i[e]);return t}get_Text_from_div(t){t=this.replace_all(t,"&nbsp;"," "),t=this.replace_all(t,"&amp;",""),t=this.replace_all(t,"<br>","\n"),t=this.replace_all(t,"<br/>","\n"),t=this.replace_all(t,"<br />","\n"),t=this.replace_all(t,"</p>","觀");let i="",e=!1;for(let a of t)"<"==a&&(e=!0),e?">"==a&&(e=!1):i+=a;return i=this.replace_all(i,"觀\n","\n"),i=this.replace_all(i,"觀","\n")}}let लिपि=new लिपिलेखिकासहायक;class लिपिलेखिकापरिवर्तक{constructor(){this.k=लिपि,this.karya=!0,this.time=लिपि.time(),this.back_space=0,this.sahayika_usage=!0,this.halant_add_status=!1,this.script="Hindi",this.varna=["","",""],this.next_chars="",this.d=!1,this.mAtrA_sthiti=!1,this.capital=[0,"",-1,-1,0,0,!1],this.store_last_of_3="",this.added_fonts=[],this.last_of_3_status_for_mAtrA=!1,this.special_ved_s=!1,this.usage_table_link=(t=>{let i=t;return i=लिपि.in(["Devanagari","Marathi","Konkani","Sanskrit","Nepali"],i)?"Hindi":i,`${लिपि.image_loca}/${i}.png`}),this.pUrva_lekhit=[["",-1],["",-1],["",-1],["",-1],["",-1]],this.second_cap_time=0,this.sahayika=new लिपिलेखिकालेखनसहायिका,this.set_interface_lang=((t="English")=>this.sahayika.set_lang(t)),this.hide=(()=>this.sahayika.elm.hide()),this.from_click=!1,this.font_scripts=["Sharada","Modi","Brahmi","Siddham","Granth"]}mukhya(t,i){if(!this.karya)return;if("on"!=t.attr("lipi-lekhika"))return;if(null==(i=i.data)||null==i)return void this.clear_all_val(!0);i=i.substring(i.length-1);let e=this.elphased_time()<15;if(this.k.in(this.k.pUrNasarve,i)){e||this.clear_all_val(!0);let a=null==t.attr("lipi-lang")?this.script:t.attr("lipi-lang");this.prakriyA({text:i,typing:1,lang:a,mode:null==t.attr("lipi-mode")?this.k.akSharAH[a].sa:t.attr("lipi-mode"),element:t})}else this.clear_all_val(!0)}elphased_time(){let t=this.time,i=this.k.time(),e=i-t;return this.time=i,e}prakriyA(t){let i="",e=0,a="",s=null,n=!1,l=this.k;if(this.k.in([void 0,null,""],t.text))return"";i=t.text,a=t.lang,null!=t.typing&&(e=1),1==t.html&&(n=!0),null!=t.element&&(s=t.element),this.akSharANi=l.akSharAH[a],this.halant=l.in(["Normal","Romanized","Urdu"],a)?"":this.akSharANi["."][".x"][0];let r=0==t.mode&&1==e?0:1;if(this.dev_text=[],n=!(0!=e||!n)){let t=i,e={"&nbsp;":" ","&amp;":"","<br>":"\n","<br/>":"\n","<br />":"\n"};for(let i in e)t=l.replace_all(t,i,e[i]);i=t}var h=t=>{if(0==e)for(let i of t)this.dev_text.push(i)};let o=!1,p=!1;for(let t=0;t<i.length;t++){let c=i[t];if("<"==c&&n)o=!0,h(c),this.clear_all_val(!0);else if(o)">"==c&&(o=!1),h(c);else if("#"!=c||"^"!=i[t+1]||0!=e||p)if(p){if("^"==c&&"#"==i[t+1]){p=!1,t++;continue}h(c)}else""==this.next_chars&&c in this.akSharANi?(this.varna[2]="",this.vitaraNa(c,e,r,s,a)):""==this.next_chars&&l.is_upper(c)&&l.to_lower(c)in this.akSharANi?(this.varna[2]="",this.vitaraNa(l.to_lower(c),e,r,s,a)):""!=this.next_chars?l.in(this.next_chars,c)?(this.d&&(this.halant_add_status=!0,this.d=!1),this.varna[2]=this.varna[1],c=this.varna[0]+c,this.vitaraNa(c,e,r,s,a)):";"==c||"q"==c?(this.clear_all_val(!0),1==e?this.back_space++:0==e&&"Romanized"==a&&this.dev_text.push(";")):c in this.akSharANi?(this.clear_all_val(),this.varna[2]="",""!=this.store_last_of_3&&0!=this.pUrva_lekhit[4][1]&&"Tamil-Extended"==a&&"#"==c&&this.clear_all_val(!0),this.vitaraNa(c,e,r,s,a)):l.is_upper(c)&&l.to_lower(c)in this.akSharANi?(this.clear_all_val(),this.vitaraNa(l.to_lower(c),e,r,s,a)):(h(c),this.clear_all_val(!0)):(h(c),this.clear_all_val(!0));else p=!0,this.clear_all_val(!0),t++}if(0==e){let t=this.dev_text.join("");return this.dev_text=[],this.clear_all_val(!0),t}}vitaraNa(t,i,e,a,s){let n=this.k;"Urdu"==s&&n.in(["a","i","u"],t)&&-1==this.pUrva_lekhit[4][1]&&(t+="1");let l=[!1,["",-1]],r=this.akSharANi[t[0]],h=r[t],o=this.pUrva_lekhit[3][1],p=this.pUrva_lekhit[4][1],c=n.last(h);if(2==this.capital[0]&&1==i&&(t==this.capital[1]?n.time()-this.capital[4]<=4?(t=n.to_upper(t),h=(r=this.akSharANi[t])[t],p=this.capital[3],c=n.last(h),this.back_space+=2*this.capital[5],0==c&&n.in([1,3],this.pUrva_lekhit[2][1])&&(l=[!0,this.pUrva_lekhit[2]]),n.in(["Brahmi","Modi","Sharada","Siddham","Granth"],s)&&(this.back_space++,1==p&&this.back_space++,1==e&&(this.back_space-=2,1!=p&&this.back_space++)),this.capital[6]&&(this.back_space--,1==e&&(1==this.capital[3]&&this.back_space--,1==this.capital[2]&&(this.back_space+=2)),1!=this.capital[3]&&1==this.capital[2]&&this.back_space--),0==e&&1==this.capital[2]&&(this.back_space++,1!=this.capital[3]||this.capital[6]||this.back_space++),1==e&&3==this.capital[3]&&this.back_space--,this.capital=[3,"",-1,-1,0,0,!1]):this.capital=[2,t,c,this.pUrva_lekhit[3][1],this.second_cap_time,this.capital[5],!1]:this.capital=[0,"",-1,-1,0,0,!1]),this.mAtrA_sthiti&&n.in([1,2],c))return this.clear_all_val(!0),void this.vitaraNa(n.last(t),i,e,a,s);if(this.varna[0]=t,this.varna[1]=h[0],1!=p&&3!=p||(1!=c||n.in(this.next_chars,n.last(t))||0!=e?0==c&&(this.mAtrA_sthiti=!0):(this.halant_add_status=!0,3==p&&(this.back_space++,this.varna[1]=this.store_last_of_3+this.varna[1]))),1==this.capital[0]&&1==i&&(t==this.capital[1]?(this.capital[0]=2,this.second_cap_time=n.time()):n.last(t)==this.capital[1]&&this.akSharANi[n.to_upper(this.capital[1])][n.to_upper(this.capital[1])][0]!=this.varna[1]?(this.capital[6]=!0,this.capital[0]=2,this.capital[2]=c,this.capital[5]=this.varna[1].length,this.second_cap_time=n.time()):this.capital=[0,"",-1,-1,0,0]),"LR"!=t&&"r3"!=t||0!=c||(1!=o?this.mAtrA_sthiti=!1:0==e&&this.back_space++,n.in(["Modi","Sharada"],s)&&this.back_space++),this.mAtrA_sthiti&&(this.varna[1]=h[1],1==p&&1==e&&(this.back_space+=this.halant.length),3==p?(this.back_space++,1==e&&this.back_space++,this.varna[1]+=this.store_last_of_3,this.last_of_3_status_for_mAtrA=!0):0==p&&this.last_of_3_status_for_mAtrA&&(this.varna[1]+=this.store_last_of_3,this.last_of_3_status_for_mAtrA=!0)),"Tamil-Extended"==s&&"M"==t&&((3==o||0==o&&3==this.pUrva_lekhit[2][1])&&0==p||3==this.capital[0]&&(3==this.pUrva_lekhit[1][1]||0==this.pUrva_lekhit[1][1]&&3==this.pUrva_lekhit[0][1])&&0==this.pUrva_lekhit[2][1])&&(this.varna[1]+=this.store_last_of_3,this.back_space++),"Tamil-Extended"==s&&n.in(["#an","#s"],t)&&("#an"==t&&(3==this.pUrva_lekhit[1][1]||0==this.pUrva_lekhit[1][1]&&3==this.pUrva_lekhit[0][1])&&0==this.pUrva_lekhit[2][1]?(this.varna[1]+=this.store_last_of_3,this.back_space++):"#s"!=t||3!=this.pUrva_lekhit[2][1]&&0!=this.pUrva_lekhit[2][1]&&3!=this.pUrva_lekhit[1][1]||0!=this.pUrva_lekhit[3][1]||(this.varna[1]+=this.store_last_of_3,this.back_space++,this.special_ved_s=!0)),"Tamil"==s&&"R"==t&&1==p&&2==c&&this.back_space++,"Tamil-Extended"==s&&n.in(["#ss","#sss"],t)&&this.special_ved_s&&(this.varna[1]+=this.store_last_of_3),1==p&&2==c&&1==t.length&&Object.keys(r).length>1&&0==e)for(let i of n.last(h,-2))if(t+i in r){1==n.last(r[t+i])&&(this.d=!0);break}(n.in(s,"Tamil")||"Punjabi"==s)&&n.in(["R","LR","LRR","RR"],t)&&1==c&&(c=2),1==e&&(1==c?this.varna[1]+=this.halant:3==c&&(this.varna[1]=n.substring(this.varna[1],0,-1)+this.halant+n.last(this.varna[1])));let d=this.likha(this.varna[1],this.varna[2],this.back_space,this.halant_add_status);if(0==i){for(let t=0;t<d[1];t++)this.dev_text.pop();for(let t of d[0])this.dev_text.push(t)}else if(1==i){let t=!1;if(n.in(["input","textarea"],a[0].tagName.toLowerCase())&&(t=!0),t){let t=a.val(),i=a[0].selectionStart+1,e=0;this.from_click&&(i++,e=1);let s=t.substring(0,i-d[1]-2),n=d[0],l="";t.length+1+(this.from_click?1:0)==i?l=t.substring(i+1):t.length+1!=i&&(l=t.substring(i-1-e));let r=s.length+n.length;a.val(s+n+l),a.focus(),a[0].selectionStart=r,a[0].selectionEnd=r,this.from_click&&(this.from_click=!1)}else{let t=a.html(),i=new VanillaCaret(a[0]),e=i.getPos()+1;this.from_click&&(e=this.sahayika.abhisthAnam);let s=!1,l=[],r=0;t=n.replace_all(t,"&nbsp;","<费费费费>"),t=n.replace_all(t,"&amp;","<费费费>");let h=!0,o=0,p=0,c="";for(let i=0;i<t.length;i++){let a=t[i];if("<"==a)s=!0;else if(s&&">"==a){"费"==c&&(r++,h&&o++,p++),s=!1,l.push(a);continue}r>=e-2-d[1]&&r<e-2&&!s?(r++,h&&o++,p++):(r!=e-2||s?l.push(a):(l.push("梵"),this.from_click&&l.push(a),h=!1),s||(r++,h&&o++,p++),c=a)}l=l.join(""),l=n.replace_all(l,"<费费费费>","&nbsp;");let u=(l=(l=n.replace_all(l,"<费费费>","&amp;")).split("梵"))[0],f=0,_=d[0],g="";null!=l[1]&&null!=l[1]||(l[1]="");let k=u+_+(g=l[1]);a.html(k),this.from_click&&(this.from_click=!1),i.setPos(o+_.length-d[1]-f)}}if(3==this.capital[0]&&(this.capital=[0,"",-1,-1,0,0,!1]),1==t.length&&n.is_lower(t)&&n.to_upper(t)in this.akSharANi&&0==this.capital[0]&&1==i){let i=[0,"",-1,-1,0,0,!1],e=[1,t,c,p,n.time(),this.varna[1].length,!1];t+t in r?this.akSharANi[n.to_upper(t)][n.to_upper(t)][0]!=r[t+t][0]?this.capital=e:this.capital=i:this.capital=e}if(this.next_chars=h[h.length-2],this.sahayika_usage&&1==i){let i={key:[t,this.next_chars],status:[p,c],elm:a,mAtrA:this.mAtrA_sthiti,special_cap:l,lang:s,sa:e};1==this.capital[0]&&(i.cap=!0),this.sahayika.show(i)}3==c&&(this.store_last_of_3=n.last(this.varna[1])),""==this.next_chars&&this.clear_all_val(),this.pUrva_lekhit[0]=this.pUrva_lekhit[1],this.pUrva_lekhit[1]=this.pUrva_lekhit[2],this.pUrva_lekhit[2]=this.pUrva_lekhit[3],this.pUrva_lekhit[3]=this.pUrva_lekhit[4],this.pUrva_lekhit[4]=[t,c]}likha(t,i,e,a){let s=0,n="";if(""==i||""==t)n=t,s=i.length;else if(t[0]!=i[0])n=t,s=i.length;else{let e=0;for(let a in i){i[a];if(t.length==e)break;if(t[e]!=i[e])break;e++}n=t.substring(e),s=i.length-e}return s+=e,a&&(n=this.halant+n),this.back_space=0,this.halant_add_status=!1,[n,s]}clear_all_val(t){this.next_chars="",this.varna=["","",""],this.mAtrA_sthiti=!1,this.last_of_3_status_for_mAtrA=!1,this.special_ved_s=!1,this.back_space=0,t&&(this.pUrva_lekhit=[["",-1],["",-1],["",-1],["",-1],["",-1]],this.store_last_of_3="",this.capital=[0,"",-1,-1,0,0,!1],this.sahayika.pUrvavarNa=[-1,""],this.hide())}parivartak(t,i,e,a=!1){if("Devanagari"==i&&(i="Sanskrit"),"Devanagari"==e&&(e="Sanskrit"),i==e)return t;var s=लिपि,n=(t,i)=>this.prakriyA({lang:t,text:i});if("Normal"==i)return n(e,t);var l=(t,i=0)=>{let e=["antar","kram"];return e[i]in s.akSharAH[t]?s.akSharAH[t][e[i]]:[{},[]][i]},r=[["","",-1],["","",-1],["","",-1],["","",-1],["","",-1]],h=l(i),o=l(e),p=l(i,1),c=l(e,1),d="",u="",f="",_=t=>s.in(["Normal","Romanized","Urdu"],t)?"":s.akSharAH[t]["."][".x"][0],g=t=>"."in s.akSharAH[t]&&".z"in s.akSharAH[t]["."]?s.akSharAH[t]["."][".z"][0]:"",k={from:_(i),to:_(e)},m={from:g(i),to:g(e)},v=t=>{if(s.in(["Romanized","Urdu"],i)||s.in(["Normal","Romanized","Urdu"],e)){let a=h[t][0],n=[["o","e"],["O","E"]];return"Urdu"!=e&&s.in(n[0],a)&&(s.in(["Tamil","Telugu","Kannada","Malayalam","Sinhala","Purna-Devanagari"],i)||(a=n[1][n[0].indexOf(a)])),t==k.from&&(a=""),a}if(s.in(p,t)){let i=c[p.indexOf(t)];return 1==i?"":i}if(4==h[t].length){let i=c[h[t][3]];return 1==i?"":i}if(s.in([.1,2.1,1.1],h[t][1])){let i="";for(let e of t){let t=c[p.indexOf(e)];i+=1==t?"":t}return i}1==r[0][0].length&&s.in([1,3],r[1][2])&&0==r[0][2]&&(this.pUrva_lekhit[4]=[r[1][1],r[1][2]]);let a=n(e,h[t][0]);return s.in([1,3],r[0][2])&&a[0]in o&&s.in([1,3],Math.floor(o[t][1]))&&(a=k.to+a),1==a?"":a},b=(t,a,n=!1,l=!1)=>{if(!l&&s.in(["\ud805","\ud804"],t)&&s.in(["Modi","Sharada","Brahmi","Siddham","Granth"],i))return 1;let o=!1,p=-1,c=!1;if(""!=u)if(!n&&s.in(u,t)){let i=h[f+=t];u=2==i.length?"":i[2],p=Math.floor(i[1]),o=!0,c=!0}else{let t=v(f);r[0][1]=t,d+=t}if(!n&&!o&&t in h){let i=h[t];u=2==i.length?"":i[2],p=Math.floor(i[1]),f=t,o=!0}if(!c&&s.in(["Normal","Romanized","Urdu"],e)&&s.in([1,3],r[0][2])&&0!=p&&!s.in([k.from,m.from],t)&&(d+="a"),n||o||(d+=t,f="",u="",p=-1),!n){if(!c)for(let t=4;t>=1;t--)r[t]=r[t-1];r[0]=["","",-1],r[0][0]=f,r[0][2]=p}if(o&&""==u){let t=v(f);r[0][1]=t,d+=t}};let y=(t,i)=>{let e="ாிீுூெேைொோௌ்",a=["²³⁴","₂₃₄"],n="to"==i?`[கசஜடதப][${a[0]}][${e}]`:`[கசஜடதப][${e}][${a[0]+a[1]}]`,l="to"==i?1:2,r="to"==i?o:h,p=t.split("");for(let i of s.reg_index(t,new RegExp(n,"gm"))){let t=i[0],e=r[p[t]];if(e.length>2){let i=p[t+l];if(s.in(a[1],i)&&(i=p[t+l]=a[0][a[1].indexOf(i)]),s.in(e[2],i)){let i=p[t+1];p[t+1]=p[t+2],p[t+2]=i}}}return p.join("")};"Tamil-Extended"==i&&(t=y(t,"from"));for(let i=0;i<t.length;i++)1==b(t[i])&&b(t[i]+t[i+1],++i);return b(" ",t.length,!0),"Tamil-Extended"==e?y(d,"to"):s.in([i,e],"Urdu")||s.in([i,e],"Romanized")?n(e,d):d}add_font(t){let i=this.font_scripts;if(!लिपि.in(i,t)||लिपि.in(this.added_fonts,t))return;let e=`LipiFont${t}`;var a=new FontFace(e,`url(${लिपि.font_loca}/${t}.woff2)`);let s=this.sahayika.elm.css("font-family");this.sahayika.elm.css("font-family",`${s},"${e}"`),a.load().then(function(t){document.fonts.add(t)}).catch(function(t){}),this.added_fonts.push(t)}}jQuery.fn.lipi_lekhika_add=((t=!1)=>{let i=LipiLekhikA,e=i.k;-1==e.elms.indexOf(this)&&(e.elms.push(this),t?(this.attr("oninput","LipiLekhikA.mukhya($(this), event);"),this.attr("onkeydown","लिपि.clear(event);")):(this.on("input",function(){i.mukhya($(this),event)}),this.on("keydown",function(){e.clear(event)})))}),jQuery.lipi_lekhika=((t=60)=>{let i=LipiLekhikA,e=i.k;if(!i.init)return a(),setInterval(()=>a(),1e3*t),i.init||(i.init=!0),i;function a(){let t=$(".Lipi-LekhikA"),a=["lipi-lekhika","lekhan-sahayika"];for(let s of t){let n=$(s);if(-1==e.elms.indexOf(s)&&(e.elms.push(s),e.in(["span","div","textarea","input"],s.tagName.toLowerCase()))){for(let t of a)null==n.attr(t)&&n.attr(t,"on");t.attr({autocapitalize:"none",autocomplete:"off",autocorrect:"off"}),s.oninput=function(){i.mukhya($(s),event)},s.onkeydown=function(){e.clear(event)},null!=n.attr("lipi-lang")&&e.load_lang(n.attr("lipi-lang"))}}}}),jQuery.load_lekhika_lang=((t,i=null)=>{LipiLekhikA.k.load_lang(t,i)}),jQuery.lekhika_convert=((t,i,e)=>LipiLekhikA.parivartak(t,i,e));class लिपिलेखिकालेखनसहायिका{constructor(){this.c=0,this.d=0,this.k=लिपि,this.idAnIma=0,this.reset_capital_status=!1,this.pUrvavarNa=[["","",-1],""];let t="లిಪಿலேഖിକା",i="";this.elm=jQuery(`<div id="${t}"></div>`).appendTo("body");let e={position:"absolute","background-color":"white",padding:"2.5px",border:"2px solid black","border-radius":"4.5px","font-weight":"bold",display:"none","z-index":"1000000","user-select":"none",cursor:"default","background-color":"white","min-width":"58px","max-width":"fit-content","box-shadow":"0 4px 8.25px 0 #00000033, 0 6px 20px 0 #00000030","font-family":'"Nirmala UI","Calibri"',"transition-duration":"500ms"};for(let t in e)i+=`${t}:${e[t]};`;i=`#${t}{${i}}`;let a="",s="";a+="<td><span></span><span></span></td>",s+='<td><a rel="noopener" href="https://rebrand.ly/lekhika" target="_blank"><span></span></a></td>',a+="<td></td>",s+="<td></td>";for(let t=0;t<=60;t++)a+='<td class="लिপিಜಃ"></td>',s+='<td class="लिপিಜಂ"></td>';let n=`<table><tbody><tr>${s}</tr><tr>${a}</tr></tbody></table><div style="font-size:10.5px;color:purple;max-width:fit-content;min-width:200px"></div>`;this.elm.append(n),this.bhaNDAra_index=["sahayika","pashchAta","akShara","key1","key2"],this.bhaNDAra={sahayika:this.elm.children()[1],key1:0,key2:0,pashchAta:0,akShara:0,tbody:[0,0]};let l=$(this.elm.children()[0]).children()[0];l=$(l).children(),this.adhar=0,this.bhaNDAra.tbody=[l[0],l[1]];let r=$(l[0]).children(),h=$(l[1]).children();this.bhaNDAra.pashchAta=r,this.bhaNDAra.akShara=h,this.bhaNDAra.key1=r[1],this.bhaNDAra.key2=h[1];let o=$(h[0]).children();$(o[1]).css({cursor:"pointer",display:"none",position:"absolute",top:"37px",left:"5px"}),$(o[0]).css({cursor:"pointer",display:"none",position:"absolute",top:"37px",left:"5px"}),this.ins_button=[$(o[1]),$(o[0]),0,0],this.ins_sthiti=1,this.ins_button[this.ins_sthiti].show(),this.ins_button[0].click(()=>this.change_ins(0)),this.ins_button[1].click(()=>this.change_ins(1)),1==this.ins_sthiti&&(this.bhaNDAra.sahayika.style.display="none"),$(l[1]).css({color:"green","font-size":"18px","text-align":"center",cursor:"grab"}),$(l[0]).css({color:"black","font-size":"18px","text-align":"center",cursor:"grab"}),$(this.bhaNDAra.key1).css({color:"brown","font-size":"19.5px","text-align":"center","padding-left":"22.5px","padding-right":"5.6px",cursor:"default"}),$(this.bhaNDAra.key2).css({color:"red","font-size":"15px","text-align":"center","padding-left":"22.5px","padding-right":"5.6px","margin-bottom":"2.5px",cursor:"default"}),this.display={};for(let t=0;t<60;t++)r[t+2].style.display="none",h[t+2].style.display="none";this.objs={down:$(o[0]),up:$(o[1]),icon:$($(r[0]).children()[0])},$(this.objs.icon.children()[0]).css({display:"inline-block",height:"20px",width:"20px",position:"absolute",left:"4px",top:"10px","background-image":`url(${this.k.sanchit}/icon.png)`,"background-size":"20px 20px"});let p=['<svg style="enable-background:new 0 0 26 26;" height="18px" width="18px" class="निच्चैरुच्चैः" viewBox="96 160 320 192"><polygon points="396.6,',"160 416,180.7 256,352 96,180.7 115.3,160 256,310.5","352 416,331.3 256,160 96,331.3 115.3,352 256,201.5",'"/></svg>'];o[1].innerHTML=`${p[0]+p[2]+p[3]}`,o[0].innerHTML=`${p[0]+p[1]+p[3]}`;let c=$(".निच्चैरुच्चैः");this.ins_button[2]=c[0],this.ins_button[3]=c[1],this.ins_msg="",this.set_lang("English"),this.abhisthAnam=0,$("body").click(t=>{let i=LipiLekhikA,e=this,a=e.bhaNDAra;if("none"==e.elm.css("display"))return;let s=t.target,n=$(s).parents(),l=-1!=n.index(e.elm[0]);if(n=$(s).parent()[0],this.k.in(a.tbody,n)&&!this.k.in([a.key1,a.key2],t)){l=!0;let t=e.adhar;for(let e of s.value)if(this.k.in(["input","textarea"],t[0].tagName.toLowerCase())){i.from_click=!0;let a=null==t.attr("lipi-lang")?this.k.k.script:t.attr("lipi-lang");i.prakriyA({text:e,typing:1,lang:a,mode:null==t.attr("lipi-mode")?this.k.akSharAH[a].sa:t.attr("lipi-mode"),element:t})}}l||i.clear_all_val(!0)}),$("body").dblclick(()=>{let t=LipiLekhikA;"none"!=this.elm[0].style.display&&t.clear_all_val(!0)});let d=":hover{color:blue;}",u=".लिপি",f="{padding:0.5px;}";this.elm.append(`<style>${u}ಜಃ${d}${u}ಜಂ${d}${u}ಜಃ${f}${u}ಜಂ${f}${i}</style>`)}hide_other(){let t=LipiLekhikA.sahayika;1==t.c&&t.elm.hide(),t.c--}change_ins(t){let i=LipiLekhikA.sahayika;i.ins_button[t].hide();let e=Math.abs(t-1);i.ins_sthiti=e,i.ins_button[Math.abs(t-1)].show();let a=i.bhaNDAra.sahayika;i.set_labels(1,0==e?i.ins_msg:""),a.style.display=1==e?"none":"block"}show(t){if("on"!=t.elm.attr("lekhan-sahayika"))return;this.reset_capital_status=!1;let i=this.k;let e=t.key[1],a=t.key[0],s=t.mAtrA,n=t.special_cap,l=t.lang,r=t.sa;n[0]&&(this.pUrvavarNa=[[i.akSharAH[l][n[1][0]][n[1][0]][0],"",n[1][1]],n[1][0]]),this.adhar=t.elm;let h=t.elm.caret("offset"),o=h.top,p=h.height,c=h.left;if(i.in(["input","textarea"],t.elm[0].tagName.toLowerCase()))this.abhisthAnam=t.elm.selectionStart+1;else{let i=new VanillaCaret(t.elm[0]);this.abhisthAnam=i.getPos()+2}this.elm[0].style.top=`${o+p}px`,this.elm[0].style.left=`${c+8}px`;let d=["",!1];i.in(["Urdu","Romanized","Normal"],l)||(d=[i.akSharAH[l]["."][".x"][0],1==r]);let u=new Map,f=i.akSharAH[l][a[0]],_=0;for(let t of e)if(a+t in f){u.set(t,f[a+t]);for(let e of i.last(f[a+t],-2))a+t+e in f&&(u.set(t+e,f[a+t+e]),_++);_++}let g=0,k=[0,0];if("cap"in t){k[0]=_;let t=i.to_upper(a),e=i.akSharAH[l][t];u.set(a+a,e[t]);let s=i.last(u.get(a+a),-2);for(let n of s)if(t+n in e){u.set(a+a+n,e[t+n]);for(let s of i.last(e[t+n],-2))t+n+s in e&&(u.set(a+a+n+s,e[t+n+s]),_++);_++}k[1]=_+1}if((i.in([1,3],i.last(this.pUrvavarNa[0]))||s)&&0==i.last(f[a])){let t=this.pUrvavarNa[0][0]+f[a][1];3==i.last(this.pUrvavarNa[0])&&"a"!=a?t=i.substring(t,0,-2)+i.last(t)+i.last(t,-2):3==i.last(this.pUrvavarNa[0])&&"a"==a&&(t=i.last(t,0,-1)+i.last(t)),this.set_labels(4,this.pUrvavarNa[1]+a),this.set_labels(5,t)}else{this.set_labels(4,a);let t=f[a][0]+(i.in([1,3],i.last(f[a]))?d[0]:"");3==i.last(f[a])&&(t=i.substring(t,0,-2)+i.last(t)+i.last(t,-2)),this.set_labels(5,t)}let m=0;for(let t of u.keys()){if(s&&i.in([1,2],i.last(u.get(t)))){m++;continue}this.set_labels(2,t,g);let e=u.get(t)[0];0==i.last(u.get(t))&&i.in([1,3],i.last(this.pUrvavarNa[0]))&&(e=u.get(t)[1]),i.in([1,3],i.last(u.get(t)))&&d[1]&&(e+=d[0],3==i.last(u.get(t))&&(e=i.substring(e,0,-2)+i.last(e)+i.last(e,-2))),(i.in([1,3],i.last(this.pUrvavarNa[0]))||s)&&0==i.last(u.get(t))&&(e=this.pUrvavarNa[0][0]+e,3==i.last(this.pUrvavarNa[0])&&(e=i.substring(e,0,-2)+i.last(e)+i.last(e,-2))),this.set_labels(3,e,g),g++}let v=0;for(let t of u.keys())v++;if((v-=m)>=this.idAnIma)for(let t=this.idAnIma;t<v;t++)this.show_elm(1,t),this.show_elm(2,t);else for(let t=v;t<this.idAnIma;t++)this.hide_elm(1,t),this.hide_elm(2,t);this.idAnIma=v,this.c++,s||(this.pUrvavarNa=[f[a],a]),this.elm.show(),"cap"in t&&(this.d++,this.reset_capital_status=!0,setTimeout(function(){!function(t){let i=LipiLekhikA.sahayika;if(i.d--,i.reset_capital_status){if(0==i.d)for(let e=t[0];e<t[1];e++)i.set_labels(2,"",e),i.set_labels(3,"",e),i.hide_elm(1,e),i.hide_elm(2,e),i.idAnIma--;LipiLekhikA.capital=[0,"",-1,-1,0,0,!1]}}(k)},4e3));let b=this.hide_other;setTimeout(function(){b()},15e3)}hide_elm(t,i){this.bhaNDAra[["pashchAta","akShara"][t-1]][i+2].style.display="none"}show_elm(t,i){this.bhaNDAra[["pashchAta","akShara"][t-1]][i+2].style.removeProperty("display")}set_labels(t,i,e=-1){-1==e||3!=t&&2!=t?this.bhaNDAra[this.bhaNDAra_index[t-1]].innerHTML=i:(e+=2,t--,this.bhaNDAra[this.bhaNDAra_index[t]][e].innerHTML=i,2==t?this.bhaNDAra.pashchAta[e].title=i:1==t&&(this.bhaNDAra.akShara[e].title=i,this.bhaNDAra.akShara[e].value=i,this.bhaNDAra.pashchAta[e].value=i))}set_lang(t){let i=()=>{let i=this.display[t];this.ins_msg=this.k.text_to_html(i.ins,"li"),this.elm.attr("title",i.title);for(let t in this.objs)this.objs[t].attr("title",i[t]);0==this.ins_sthiti&&this.set_labels(1,this.ins_msg)};t in this.display?i():$.get({url:`${this.k.sanchit}/sahayika/${t}.json`,dataType:"json",success:e=>{this.display[t]=e,i()}})}}let LipiLekhikA=new लिपिलेखिकापरिवर्तक;लिपि.k=LipiLekhikA,function(t,i){if("function"==typeof define&&define.amd)define("VanillaCaret",["module"],i);else if("undefined"!=typeof exports)i(module);else{var e={exports:{}};i(e),t.VanillaCaret=e.exports}}(this,function(t){"use strict";var i=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),e=function(){function t(i){(function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),this.target=i,this.isContentEditable=i&&i.contentEditable}return i(t,[{key:"getPos",value:function(){if(document.activeElement!==this.target)return-1;if(this.isContentEditable){this.target.focus();var t=document.getSelection().getRangeAt(0),i=t.cloneRange();return i.selectNodeContents(this.target),i.setEnd(t.endContainer,t.endOffset),i.toString().length}return this.target.selectionStart}},{key:"setPos",value:function(t){if(this.isContentEditable){if(t>=0){var i=window.getSelection(),e=this.createRange(this.target,{count:t});e&&(e.collapse(!1),i.removeAllRanges(),i.addRange(e))}}else this.target.setSelectionRange(t,t)}},{key:"createRange",value:function(t,i,e){if(e||((e=document.createRange()).selectNode(t),e.setStart(t,0)),0===i.count)e.setEnd(t,i.count);else if(t&&i.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<i.count?i.count-=t.textContent.length:(e.setEnd(t,i.count),i.count=0);else for(var a=0;a<t.childNodes.length&&(e=this.createRange(t.childNodes[a],i,e),0!==i.count);a++);return e}}]),t}();t.exports=e}),function(t,i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t.returnExportsGlobal=i(e)}):"object"==typeof exports?module.exports=i(require("jquery")):i(jQuery)}(this,function(t){var i,e,a,s,n,l,r,h;i=function(){function i(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return i.prototype.setPos=function(t){var i,e,a,s;return(s=r.getSelection())&&(a=0,e=!1,(i=function(t,n){var r,h,o,p,c,d;for(d=[],o=0,p=(c=n.childNodes).length;o<p&&(r=c[o],!e);o++)if(3===r.nodeType){if(a+r.length>=t){e=!0,(h=l.createRange()).setStart(r,t-a),s.removeAllRanges(),s.addRange(h);break}d.push(a+=r.length)}else d.push(i(t,r));return d})(t,this.domInputor)),this.domInputor},i.prototype.getIEPosition=function(){return this.getPosition()},i.prototype.getPosition=function(){var t,i;return i=this.getOffset(),t=this.$inputor.offset(),i.left-=t.left,i.top-=t.top,i},i.prototype.getOldIEPos=function(){var t,i;return i=l.selection.createRange(),(t=l.body.createTextRange()).moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",i),t.text.length},i.prototype.getPos=function(){var t,i,e;return(e=this.range())?((t=e.cloneRange()).selectNodeContents(this.domInputor),t.setEnd(e.endContainer,e.endOffset),i=t.toString().length,t.detach(),i):l.selection?this.getOldIEPos():void 0},i.prototype.getOldIEOffset=function(){var t,i;return(t=l.selection.createRange().duplicate()).moveStart("character",-1),{height:(i=t.getBoundingClientRect()).bottom-i.top,left:i.left,top:i.top}},i.prototype.getOffset=function(i){var e,a,s,n,h;return r.getSelection&&(s=this.range())?(s.endOffset-1>0&&s.endContainer!==this.domInputor&&((e=s.cloneRange()).setStart(s.endContainer,s.endOffset-1),e.setEnd(s.endContainer,s.endOffset),a={height:(n=e.getBoundingClientRect()).height,left:n.left+n.width,top:n.top},e.detach()),a&&0!==(null!=a?a.height:void 0)||(e=s.cloneRange(),h=t(l.createTextNode("|")),e.insertNode(h[0]),e.selectNode(h[0]),a={height:(n=e.getBoundingClientRect()).height,left:n.left,top:n.top},h.remove(),e.detach())):l.selection&&(a=this.getOldIEOffset()),a&&(a.top+=t(r).scrollTop(),a.left+=t(r).scrollLeft()),a},i.prototype.range=function(){var t;if(r.getSelection)return(t=r.getSelection()).rangeCount>0?t.getRangeAt(0):null},i}(),e=function(){function i(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return i.prototype.getIEPos=function(){var t,i,e,a,s,n;return i=this.domInputor,a=0,(s=l.selection.createRange())&&s.parentElement()===i&&(e=i.value.replace(/\r\n/g,"\n").length,(n=i.createTextRange()).moveToBookmark(s.getBookmark()),(t=i.createTextRange()).collapse(!1),a=n.compareEndPoints("StartToEnd",t)>-1?e:-n.moveStart("character",-e)),a},i.prototype.getPos=function(){return l.selection?this.getIEPos():this.domInputor.selectionStart},i.prototype.setPos=function(t){var i,e;return i=this.domInputor,l.selection?((e=i.createTextRange()).move("character",t),e.select()):i.setSelectionRange&&i.setSelectionRange(t,t),i},i.prototype.getIEOffset=function(t){var i;return i=this.domInputor.createTextRange(),t||(t=this.getPos()),i.move("character",t),{left:i.boundingLeft,top:i.boundingTop,height:i.boundingHeight}},i.prototype.getOffset=function(i){var e,a,s;return e=this.$inputor,l.selection?((a=this.getIEOffset(i)).top+=t(r).scrollTop()+e.scrollTop(),a.left+=t(r).scrollLeft()+e.scrollLeft(),a):(a=e.offset(),s=this.getPosition(i),{left:a.left+s.left-e.scrollLeft(),top:a.top+s.top-e.scrollTop(),height:s.height})},i.prototype.getPosition=function(t){var i,e,s,n,l;return i=this.$inputor,s=function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(t=t.replace(/\s/g,"&nbsp;")),t},void 0===t&&(t=this.getPos()),l=i.val().slice(0,t),e=i.val().slice(t),n="<span style='position: relative; display: inline;'>"+s(l)+"</span>",n+="<span id='caret' style='position: relative; display: inline;'>|</span>",n+="<span style='position: relative; display: inline;'>"+s(e)+"</span>",new a(i).create(n).rect()},i.prototype.getIEPosition=function(t){var i,e;return e=this.getIEOffset(t),i=this.$inputor.offset(),{left:e.left-i.left,top:e.top-i.top,height:e.height}},i}(),a=function(){function i(t){this.$inputor=t}return i.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],i.prototype.mirrorCss=function(){var i,e=this;return i={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,function(t,a){return i[a]=e.$inputor.css(a)}),i},i.prototype.create=function(i){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(i),this.$inputor.after(this.$mirror),this},i.prototype.rect=function(){var t,i,e;return e={left:(i=(t=this.$mirror.find("#caret")).position()).left,top:i.top,height:t.height()},this.$mirror.remove(),e},i}(),s={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},n={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return l.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(t){return this.getOffset(t)}},l=null,r=null,h=function(t){var i;return(i=null!=t?t.iframe:void 0)?(r=i.contentWindow,l=i.contentDocument||r.document):(r=window,l=document)},t.fn.caret=function(a,l,r){var o;return n[a]?(t.isPlainObject(l)?(h(l),l=void 0):h(r),o=s.contentEditable(this)?new i(this):new e(this),n[a].apply(o,[l])):t.error("Method "+a+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=i,t.fn.caret.InputCaret=e,t.fn.caret.Utils=s,t.fn.caret.apis=n});