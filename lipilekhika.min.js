/* शुभमानन्दगुप्तेन तु भगवत्प्रसादाद्भारते रचितः */
class a{constructor(){this.akSharAH={Normal:{}},this.k=null,this.sanchit="https://cdn.jsdelivr.net/gh/ofsfobnelip/lipi@latest/src/dattAMsh",this.font_loca=this.substring(this.sanchit,0,-8)+"fonts",this.image_loca=this.substring(this.sanchit,0,-12)+"img/lang",this.alph=["ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz"],this.lang_in=a=>a in this.akSharAH,this.langs=["Normal","Assamese","Bengali","Brahmi","Granth","Gujarati","Hindi","Kannada","Konkani","Malayalam","Marathi","Modi","Nepali","Oriya","Punjabi","Purna-Devanagari","Romanized","Sanskrit","Sharada","Siddham","Sinhala","Tamil-Extended","Tamil","Telugu","Urdu","Kashmiri","Sindhi"],this.alts={en:0,English:0,as:1,bn:2,Bangla:2,ben:2,br:3,gr:4,gu:5,guj:5,hi:6,hin:6,kn:7,kan:7,ko:8,kok:8,ml:9,mal:9,mr:10,mar:10,mo:11,mod:11,ne:12,nep:12,Odia:13,or:13,pa:14,pan:14,pn:14,Gurumukhi:14,guru:14,"pu-de":15,"pu-dev":15,"pur-dev":15,ro:16,rom:16,sa:17,san:17,dev:17,Devanagari:17,de:17,sh:18,shr:18,sid:19,si:20,sin:20,"ta-ex":21,"tam-ex":21,ta:22,tam:22,te:23,tel:23,ur:24},this.elms=[],this.pUrNasarve=this.alph[0]+this.alph[1]+"01234567890'$.#?",this.git=a=>l.getScript(`https://github.com/ofsfobnelip/lipi/releases/download/ext/${a}.js`),this.git("su"),this.init=!1;let a=function(){let a=a=>navigator.userAgent.match(a),b=!1;return(a(/Android/i)||a(/webOS/i)||a(/iPhone/i)||a(/iPad/i)||a(/iPod/i)||a(/BlackBerry/i)||a(/Windows Phone/i))&&(b=!0),b};this.is_mobile=a()}normalize(c){let a=c.split("-");for(let b=0;b<a.length;b++)a[b]=a[b].charAt(0).toUpperCase()+a[b].substring(1);let d=a.join("-");return this.in(this.langs,d)?d:c in this.alts?this.langs[this.alts[c]]:c}load_lang(a,b=null,c=!1,d=!0){return(d&&(a=this.normalize(a)),a in this.akSharAH)?(null!=b&&b(),new Promise(a=>a("loaded"))):l.get(this.sanchit+`/${a}.json`,{async:!c,success:c=>{this.akSharAH[a]=c,this.k.clear_all_val(!0),this.k.add_font(a),this.git(a),null!=b&&b()}})}in(a,b){return -1!=a.indexOf(b)}reg_index(c,d){let b=[],a=0;for(;null!=(a=d.exec(c));)b.push([a.index,a[0]]);return b}is_lower(a){return this.in(this.alph[1],a)}is_null(a){return null==a|| void 0==a}is_upper(a){return this.in(this.alph[0],a)}to_lower(a){return this.alph[1][this.alph[0].indexOf(a)]}to_upper(a){return this.alph[0][this.alph[1].indexOf(a)]}time(){return new Date().getTime()/1e3}replace_all(b,a,c){a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var d=new RegExp(a,"g");return b.replace(d,c)}clear(a){if(this.is_mobile)return;let b=a.key;this.in(["ArrowDown","ArrowLeft","ArrowUp","ArrowRight"],b)&&e.clear_all_val(!0)}text_to_html(b,a="div"){return this.replace_all(`<${a} style="text-align:center;">`+b+`</${a}>`,"\n",`</${a}><${a} style="text-align:center;">`)}last(a,b=-1){return null==a|| void 0==a?"":a[a.length+b]}dict_rev(a){let b={};for(let c in a)b[a[c]]=c;return b}substring(b,c,a=null){return(null==a&&(a=b.length),a>0)?b.substring(c,a):a<0?b.substring(c,b.length+a):void 0}format(b,c){for(let a=0;a<c.length;a++)b=this.replace_all(b,`{${a}}`,c[a]);return b}get_Text_from_div(a){a=this.replace_all(a,"&nbsp;"," "),a=this.replace_all(a,"&amp;",""),a=this.replace_all(a,"<br>","\n"),a=this.replace_all(a,"<br/>","\n"),a=this.replace_all(a,"<br />","\n"),a=this.replace_all(a,"</p>","\u89C0");let b="",c=!1;for(let d of a){if("<"==d&&(c=!0),c){">"==d&&(c=!1);continue}b+=d}return b=this.replace_all(b,"\u89C0\n","\n"),b=this.replace_all(b,"\u89C0","\n")}}class b{constructor(){this.k=d,this.karya=!0,this.time=d.time(),this.back_space=0,this.sahayika_usage=!0,this.halant_add_status=!1,this.script="Hindi",this.varna=["","",""],this.next_chars="",this.d=!1,this.mAtrA_sthiti=!1,this.capital=[0,"",-1,-1,0,0,!1],this.store_last_of_3="",this.added_fonts=[],this.last_of_3_status_for_mAtrA=!1,this.special_ved_s=!1,this.usage_table_link=a=>`${d.image_loca}/${this.k.normalize(a)}.png`,this.pUrva_lekhit=[["",-1],["",-1],["",-1],["",-1],["",-1]],this.second_cap_time=0,this.sahayika=new i,this.set_interface_lang=(a="English")=>this.sahayika.set_lang(a),this.hide=()=>this.sahayika.elm.hide(),this.from_click=!1,this.font_scripts=["Sharada","Modi","Brahmi","Siddham","Granth"]}mukhya(b,a){if(!this.karya||"on"!=b.attr("lipi-lekhika"))return;if(null==(a=a.data)|| void 0==a){this.clear_all_val(!0);return}a=a.substring(a.length-1);let d=15>this.elphased_time();if(this.k.in(this.k.pUrNasarve,a)){d||this.clear_all_val(!0);let c=void 0==b.attr("lipi-lang")?this.script:b.attr("lipi-lang");if(c=this.k.normalize(c),!this.k.in(this.k.langs,c))return"error";this.prakriyA({text:a,typing:1,lang:c,mode:void 0==b.attr("lipi-mode")?this.k.akSharAH[c].sa:b.attr("lipi-mode"),element:b})}else this.clear_all_val(!0)}elphased_time(){let b=this.time,a=this.k.time();return this.time=a,a-b}prakriyA(e){let h="",b=0,c="",g=null,k=!1,d=this.k;if(this.k.in([void 0,null,""],e.text))return"";h=e.text,c=e.lang,void 0!=e.typing&&(b=1),!0==e.html&&(k=!0),void 0!=e.element&&(g=e.element),this.akSharANi=d.akSharAH[c],this.halant=d.in(["Normal","Romanized","Urdu"],c)?"":this.akSharANi["."][".x"][0];let i=0==e.mode&&1==b?0:1,j=[];if(this.dev_text=[],k=0==b&&!!k)for(let m of d.reg_index(h,new RegExp("(?<=<).+?(?=>)","g")))j.push([m[0]-1,m[1].length+2]);var l=a=>{if(0==b)for(let c of a)this.dev_text.push(c)};for(let f=0;f<h.length;f++){if(k&&j.length>0&&f==j[0][0]){let n=j[0][1];j.splice(0,1),l(h.substring(f,f+n)),f+=n-1;continue}let a=h[f];""==this.next_chars&&a in this.akSharANi?(this.varna[2]="",this.vitaraNa(a,b,i,g,c)):""==this.next_chars&&d.is_upper(a)&&d.to_lower(a) in this.akSharANi?(this.varna[2]="",this.vitaraNa(d.to_lower(a),b,i,g,c)):""!=this.next_chars?d.in(this.next_chars,a)?(this.d&&(this.halant_add_status=!0,this.d=!1),this.varna[2]=this.varna[1],a=this.varna[0]+a,this.vitaraNa(a,b,i,g,c)):";"==a||"q"==a?(this.clear_all_val(!0),1==b?this.back_space++:0==b&&"Romanized"==c&&this.dev_text.push(";")):a in this.akSharANi?(this.clear_all_val(),this.varna[2]="",""!=this.store_last_of_3&&0!=this.pUrva_lekhit[4][1]&&"Tamil-Extended"==c&&"#"==a&&this.clear_all_val(!0),this.vitaraNa(a,b,i,g,c)):d.is_upper(a)&&d.to_lower(a) in this.akSharANi?(this.clear_all_val(),this.vitaraNa(d.to_lower(a),b,i,g,c)):(l(a),this.clear_all_val(!0)):(l(a),this.clear_all_val(!0))}if(0==b){let o=this.dev_text.join("");return this.dev_text=[],this.clear_all_val(!0),o}}vitaraNa(a,j,f,g,h){let b=this.k;"Urdu"==h&&b.in(["a","i","u"],a)&& -1==this.pUrva_lekhit[4][1]&&(a+="1");let A=[!1,["",-1]],k=this.akSharANi[a[0]],i=k[a],w=this.pUrva_lekhit[3][1],e=this.pUrva_lekhit[4][1],c=b.last(i);if(2==this.capital[0]&&1==j&&(a==this.capital[1]?b.time()-this.capital[4]<=4?(a=b.to_upper(a),i=(k=this.akSharANi[a])[a],e=this.capital[3],c=b.last(i),this.back_space+=2*this.capital[5],0==c&&b.in([1,3],this.pUrva_lekhit[2][1])&&(A=[!0,this.pUrva_lekhit[2]]),b.in(["Brahmi","Modi","Sharada","Siddham","Granth"],h)&&(this.back_space++,1==e&&this.back_space++,1==f&&(this.back_space-=2,1!=e&&this.back_space++)),this.capital[6]&&(this.back_space--,1==f&&(1==this.capital[3]&&this.back_space--,1==this.capital[2]&&(this.back_space+=2)),1!=this.capital[3]&&1==this.capital[2]&&this.back_space--),0==f&&1==this.capital[2]&&(this.back_space++,1==this.capital[3]&&!this.capital[6]&&this.back_space++),1==f&&3==this.capital[3]&&this.back_space--,this.capital=[3,"",-1,-1,0,0,!1]):this.capital=[2,a,c,this.pUrva_lekhit[3][1],this.second_cap_time,this.capital[5],!1,]:this.capital=[0,"",-1,-1,0,0,!1]),this.mAtrA_sthiti&&b.in([1,2],c)){this.clear_all_val(!0),this.vitaraNa(b.last(a),j,f,g,h);return}if(this.varna[0]=a,this.varna[1]=i[0],(1==e||3==e)&&(1!=c||b.in(this.next_chars,b.last(a))||0!=f?0==c&&(this.mAtrA_sthiti=!0):(this.halant_add_status=!0,3==e&&(this.back_space++,this.varna[1]=this.store_last_of_3+this.varna[1]))),1==this.capital[0]&&1==j&&(a==this.capital[1]?(this.capital[0]=2,this.second_cap_time=b.time()):b.last(a)==this.capital[1]&&this.akSharANi[b.to_upper(this.capital[1])][b.to_upper(this.capital[1])][0]!=this.varna[1]?(this.capital[6]=!0,this.capital[0]=2,this.capital[2]=c,this.capital[5]=this.varna[1].length,this.second_cap_time=b.time()):this.capital=[0,"",-1,-1,0,0]),("LR"==a||"r3"==a)&&0==c&&(1!=w?this.mAtrA_sthiti=!1:0==f&&this.back_space++,b.in(["Modi","Sharada"],h)&&this.back_space++),this.mAtrA_sthiti&&(this.varna[1]=i[1],1==e&&1==f&&(this.back_space+=this.halant.length),3==e?(this.back_space++,1==f&&this.back_space++,this.varna[1]+=this.store_last_of_3,this.last_of_3_status_for_mAtrA=!0):0==e&&this.last_of_3_status_for_mAtrA&&(this.varna[1]+=this.store_last_of_3,this.last_of_3_status_for_mAtrA=!0)),"Tamil-Extended"==h&&"M"==a&&((3==w||0==w&&3==this.pUrva_lekhit[2][1])&&0==e||3==this.capital[0]&&(3==this.pUrva_lekhit[1][1]||0==this.pUrva_lekhit[1][1]&&3==this.pUrva_lekhit[0][1])&&0==this.pUrva_lekhit[2][1])&&(this.varna[1]+=this.store_last_of_3,this.back_space++),"Tamil-Extended"==h&&b.in(["#an","#s"],a)&&("#an"==a&&(3==this.pUrva_lekhit[1][1]||0==this.pUrva_lekhit[1][1]&&3==this.pUrva_lekhit[0][1])&&0==this.pUrva_lekhit[2][1]?(this.varna[1]+=this.store_last_of_3,this.back_space++):"#s"==a&&(3==this.pUrva_lekhit[2][1]||0==this.pUrva_lekhit[2][1]||3==this.pUrva_lekhit[1][1])&&0==this.pUrva_lekhit[3][1]&&(this.varna[1]+=this.store_last_of_3,this.back_space++,this.special_ved_s=!0)),"Tamil"==h&&"R"==a&&1==e&&2==c&&this.back_space++,"Tamil-Extended"==h&&b.in(["#ss","#sss"],a)&&this.special_ved_s&&(this.varna[1]+=this.store_last_of_3),1==e&&2==c&&1==a.length&&Object.keys(k).length>1&&0==f){for(let B of b.last(i,-2))if(a+B in k){1==b.last(k[a+B])&&(this.d=!0);break}}(b.in(h,"Tamil")||"Punjabi"==h)&&b.in(["R","LR","LRR","RR"],a)&&1==c&&(c=2),1==f&&(1==c?this.varna[1]+=this.halant:3==c&&(this.varna[1]=b.substring(this.varna[1],0,-1)+this.halant+b.last(this.varna[1])));let m=this.likha(this.varna[1],this.varna[2],this.back_space,this.halant_add_status);if(0==j){for(let C=0;C<m[1];C++)this.dev_text.pop();for(let N of m[0])this.dev_text.push(N)}else if(1==j){let D=!1;if(b.in(["input","textarea"],g[0].tagName.toLowerCase())&&(D=!0),D){let s=g.val(),n=g[0].selectionStart+1,E=0;this.from_click&&(n++,E=1);let F=s.substring(0,n-m[1]-2),G=m[0],x="";s.length+1+(this.from_click?1:0)==n?x=s.substring(n+1):s.length+1!=n&&(x=s.substring(n-1-E));let H=F.length+G.length;g.val(F+G+x),g.focus(),g[0].selectionStart=H,g[0].selectionEnd=H,this.from_click&&(this.from_click=!1)}else{let o=g.html(),I=new l.CaretPos(g[0]),t=I.getPos()+1;this.from_click&&(t=this.sahayika.abhisthAnam);let p=!1,d=[],q=0;o=b.replace_all(o,"&nbsp;","<\u8D39\u8D39\u8D39\u8D39>"),o=b.replace_all(o,"&amp;","<\u8D39\u8D39\u8D39>");let u=!0,v=0,y=0,J="";for(let z=0;z<o.length;z++){let r=o[z];if("<"==r)p=!0;else if(p&&">"==r){"\u8D39"==J&&(q++,u&&v++,y++),p=!1,d.push(r);continue}if(q>=t-2-m[1]&&q<t-2&&!p){q++,u&&v++,y++;continue}q!=t-2||p?d.push(r):(d.push("\u68B5"),this.from_click&&d.push(r),u=!1),!p&&(q++,u&&v++,y++),J=r}d=d.join(""),d=b.replace_all(d,"<\u8D39\u8D39\u8D39\u8D39>","&nbsp;");let O=(d=(d=b.replace_all(d,"<\u8D39\u8D39\u8D39>","&amp;")).split("\u68B5"))[0],P=0,K=m[0],S="";(void 0==d[1]||null==d[1])&&(d[1]="");let Q=O+K+d[1];g.html(Q),this.from_click&&(this.from_click=!1),I.setPos(v+K.length-m[1]-P)}}if(3==this.capital[0]&&(this.capital=[0,"",-1,-1,0,0,!1]),1==a.length&&b.is_lower(a)&&b.to_upper(a) in this.akSharANi&&0==this.capital[0]&&1==j){let R=[0,"",-1,-1,0,0,!1],L=[1,a,c,e,b.time(),this.varna[1].length,!1];a+a in k?this.akSharANi[b.to_upper(a)][b.to_upper(a)][0]!=k[a+a][0]?this.capital=L:this.capital=R:this.capital=L}if(this.next_chars=i[i.length-2],this.sahayika_usage&&1==j){let M={key:[a,this.next_chars],status:[e,c],elm:g,mAtrA:this.mAtrA_sthiti,special_cap:A,lang:h,sa:f};1==this.capital[0]&&(M.cap=!0),this.sahayika.show(M)}3==c&&(this.store_last_of_3=b.last(this.varna[1])),""==this.next_chars&&this.clear_all_val(),this.pUrva_lekhit[0]=this.pUrva_lekhit[1],this.pUrva_lekhit[1]=this.pUrva_lekhit[2],this.pUrva_lekhit[2]=this.pUrva_lekhit[3],this.pUrva_lekhit[3]=this.pUrva_lekhit[4],this.pUrva_lekhit[4]=[a,c]}likha(b,a,f,g){let e=0,c="";if(""==a||""==b)c=b,e=a.length;else if(b[0]!=a[0])c=b,e=a.length;else{let d=0;for(let h in a){if(a[h],b.length==d||b[d]!=a[d])break;d++}c=b.substring(d),e=a.length-d}return e+=f,g&&(c=this.halant+c),this.back_space=0,this.halant_add_status=!1,[c,e]}clear_all_val(a){this.next_chars="",this.varna=["","",""],this.mAtrA_sthiti=!1,this.last_of_3_status_for_mAtrA=!1,this.special_ved_s=!1,this.back_space=0,a&&(this.pUrva_lekhit=[["",-1],["",-1],["",-1],["",-1],["",-1]],this.store_last_of_3="",this.capital=[0,"",-1,-1,0,0,!1],this.sahayika.pUrvavarNa=[-1,""],this.hide())}parivartak(c,b,a,p=!1,q=!0){if(q&&(b=this.k.normalize(b),a=this.k.normalize(a)),b==a)return c;var g=d,k=(a,b)=>this.prakriyA({lang:a,text:b,html:p}),r=[];if(p)for(let l of g.reg_index(c,new RegExp("(?<=<).+?(?=>)","g")))r.push([l[0]-1,l[1].length+2]);if("Normal"==b)return k(a,c);var f=(b,a=0)=>{let c=["antar","kram"];return c[a]in g.akSharAH[b]?g.akSharAH[b][c[a]]:[{},[]][a]},s=[["","",-1],["","",-1],["","",-1],["","",-1],["","",-1],],t=f(b),u=f(a),v=f(b,1),w=f(a,1),h="",x="",y="",m=a=>g.in(["Normal","Romanized","Urdu"],a)?"":g.akSharAH[a]["."][".x"][0],n=a=>"."in g.akSharAH[a]&&".z"in g.akSharAH[a]["."]?g.akSharAH[a]["."][".z"][0]:"",z={from:m(b),to:m(a)},A={from:n(b),to:n(a)},B=c=>{if(g.in(["Romanized","Urdu"],b)||g.in(["Normal","Romanized","Urdu"],a)){let d=t[c][0],f=[["o","e"],["O","E"]];return"Urdu"!=a&&g.in(f[0],d)&&(g.in(["Tamil","Telugu","Kannada","Malayalam","Sinhala","Purna-Devanagari"],b)||(d=f[1][f[0].indexOf(d)])),c==z.from&&(d=""),d}if(g.in(v,c)){let h=w[v.indexOf(c)];return 1==h?"":h}if(4==t[c].length){let i=w[t[c][3]];return 1==i?"":i}if(g.in([.1,2.1,1.1],t[c][1])){let j="";for(let m of c){let l=w[v.indexOf(m)];j+=1==l?"":l}return j}1==s[0][0].length&&g.in([1,3],s[1][2])&&0==s[0][2]&&(this.pUrva_lekhit[4]=[s[1][1],s[1][2]]);let e=k(a,t[c][0]);return g.in([1,3],s[0][2])&&e[0]in u&&g.in([1,3],Math.floor(u[c][1]))&&(e=z.to+e),1==e?"":e},i=(d,k,i=!1,v=!1)=>{if(!v&&g.in(["\ud805","\ud804"],d)&&g.in(["Modi","Sharada","Brahmi","Siddham","Granth"],b))return -2;let e=!1,f=-1,l=!1;if(p&&r.length>0&&k==r[0][0]){let o=r[0][1];return r.splice(0,1),h+=c.substring(k,k+o),o}if(""!=x){if(!i&&g.in(x,d)){let m=t[y+=d];x=2==m.length?"":m[2],f=Math.floor(m[1]),e=!0,l=!0}else{let q=B(y);s[0][1]=q,h+=q}}if(!i&&!e&&d in t){let n=t[d];x=2==n.length?"":n[2],f=Math.floor(n[1]),y=d,e=!0}if(!l&&g.in(["Normal","Romanized","Urdu"],a)&&g.in([1,3],s[0][2])&&0!=f&&!g.in([z.from,A.from],d)&&(h+="a"),i||e||(h+=d,y="",x="",f=-1),!i){if(!l)for(let j=4;j>=1;j--)s[j]=s[j-1];s[0]=["","",-1],s[0][0]=y,s[0][2]=f}if(e&&""==x){let u=B(y);s[0][1]=u,h+=u}};let o=(f,e)=>{let h="\u0BBE\u0BBF\u0BC0\u0BC1\u0BC2\u0BC6\u0BC7\u0BC8\u0BCA\u0BCB\u0BCC\u0BCD",c=["\xb2\xb3\u2074","\u2082\u2083\u2084"],i="\u0B95\u0B9A\u0B9C\u0B9F\u0BA4\u0BAA",l="to"==e?`[${i}][${c[0]}][${h}]`:`[${i}][${h}][${c[0]+c[1]}]`,j="to"==e?1:2,m="to"==e?u:t,a=f.split("");for(let n of g.reg_index(f,new RegExp(l,"gm"))){let b=n[0],k=m[a[b]];if(k.length>2){let d=a[b+j];if(g.in(c[1],d)&&(d=a[b+j]=c[0][c[1].indexOf(d)]),g.in(k[2],d)){let o=a[b+1];a[b+1]=a[b+2],a[b+2]=o}}}return a.join("")};"Tamil-Extended"==b&&(c=o(c,"from"));for(let e=0;e<c.length;e++){let j=i(c[e],e);-2==j?i(c[e]+c[e+1],++e):j>=2&&(e+=j-1)}return(i(" ",c.length,!0),"Tamil-Extended"==a)?o(h,"to"):g.in([b,a],"Urdu")||g.in([b,a],"Romanized")?k(a,h):h}add_font(a){let c=this.font_scripts;if(!d.in(c,a)||d.in(this.added_fonts,a))return;let b=`LipiFont${a}`;var e=new FontFace(b,`url(${d.font_loca}/${a}.woff2)`);let f=this.sahayika.elm.css("font-family");this.sahayika.elm.css("font-family",`${f},"${b}"`),e.load().then(function(a){document.fonts.add(a)}).catch(function(a){}),this.added_fonts.push(a)}}var f=function(b=60){let a=e,c=a.k;if(!a.init)return d(),setInterval(()=>d(),1e3*b),a.init||(a.init=!0),a;function d(){let g=k(".Lipi-LekhikA"),h=["lipi-lekhika","lekhan-sahayika"];for(let d of g.elm){let b=k(d);if(-1==c.elms.indexOf(d)&&(c.elms.push(d),c.in(["span","div","textarea","input"],d.tagName.toLowerCase()))){for(let e of h)void 0==b.attr(e)&&b.attr(e,"on");if(b.attr({autocapitalize:"none",autocomplete:"off",autocorrect:"off"}),b.on("input",function(b){a.mukhya(k(d),b)}),b.on("keydown",function(a){c.clear(a)}),void 0!=b.attr("lipi-lang")){let f=c.normalize(b.attr("lipi-lang"));c.in(c.langs,f)&&c.load_lang(f)}}}}},g=(a,b=null)=>e.k.load_lang(a,b),h=(a,b,c)=>e.parivartak(a,b,c);class i{constructor(){this.c=0,this.d=0,this.k=d,this.idAnIma=0,this.reset_capital_status=!1,this.pUrvavarNa=[["","",-1],""],this.ins_msg="",this.display={},this.set_lang("English"),this.abhisthAnam=0;let h="\u0C32\u0C3F\u0CAA\u0CBF\u0BB2\u0BC7\u0D16\u0D3F\u0B15\u0B3E";this.elm=k("body").appendHTML(`<div id="${h}" style="display:none;"></div>`);{let b="",c="",a=['<svg style="enable-background:new 0 0 26 26;" height="18px" width="18px" viewBox="96 160 320 192"><polygon points="396.6,',"160 416,180.7 256,352 96,180.7 115.3,160 256,310.5","352 416,331.3 256,160 96,331.3 115.3,352 256,201.5",'"/></svg>'],f=["",""];f[0]=`${a[0]+a[1]+a[3]}`,f[1]=`${a[0]+a[2]+a[3]}`,b+=`<td><span>${f[0]}</span><span>${f[1]}</span></td>`,c+='<td><a rel="noopener" href="https://rebrand.ly/lekhika" target="_blank"></a></td>',b+="<td></td>",c+="<td></td>";for(let g=0;g<=60;g++)b+="<td></td>",c+="<td></td>";let i=`<table><tbody><tr>${c}</tr><tr>${b}</tr></tbody></table><div></div>`;this.elm.append(i)}setTimeout(()=>{{let f=[];function a(a,b){let c=a+" {\n";for(let d in b)c+=`${d}:${b[d]};
`;return f.push(c+"}"),a}a(`#${h}`,{position:"absolute","background-color":"white",padding:"2.5px",border:"2px solid black","border-radius":"4.5px","font-weight":"bold","z-index":"1000000","user-select":"none",cursor:"default","background-color":"white","min-width":"58px","max-width":"fit-content","box-shadow":"0 4px 8.25px 0 #00000033, 0 6px 20px 0 #00000030","font-family":'"Nirmala UI","Calibri"',"transition-duration":"500ms"}),a(`#${h} table`,{display:"block","max-width":"210px","overflow-x":"scroll"}),this.k.is_mobile||(a(`#${h} table::-webkit-scrollbar`,{height:"4.5px"}),a(`#${h} table::-webkit-scrollbar-track`,{"background-color":"#e9e9e9","border-radius":"10px"}),a(`#${h} table::-webkit-scrollbar-thumb`,{"background-color":"#5353ff","border-radius":"10px"}),a(`#${h} table::-webkit-scrollbar-thumb:hover`,{"background-color":"blue"}));let b=`#${h} table tbody tr`;a(`${b}:nth-child(2) td:nth-child(1) span`,{cursor:"pointer",display:"none",position:"absolute",top:"37px",left:"5px"}),a(`${b} td`,{"font-size":"18px","text-align":"center",cursor:"grab"}),a(`${b}:nth-child(1) td`,{color:"black"}),a(`${b}:nth-child(2) td`,{color:"green"});let g=a(`${b} td:not(:nth-child(1)):not(:nth-child(2))`,{display:"none"});a(`${g}:hover`,{color:"blue"}),a(`${b} td:nth-child(2)`,{"text-align":"center","padding-left":"22.5px","padding-right":"5.6px",cursor:"default"}),a(`${b}:nth-child(1) td:nth-child(2)`,{color:"brown","font-size":"19.5px"}),a(`${b}:nth-child(2) td:nth-child(2)`,{color:"red","font-size":"15px"}),a(`${b}:nth-child(1) td:nth-child(1) a`,{display:"inline-block",height:"20px",width:"20px",position:"absolute",left:"4px",top:"10px","background-image":`url(${this.k.sanchit}/icon.png)`,"background-size":"20px 20px"}),a(`#${h} table+div`,{"font-size":"10.5px",color:"purple","max-width":"fit-content","min-width":"200px",display:"none"}),this.elm.append(`<style>${f.join("\n")}</style>`)}{this.bhaNDAra_index=["sahayika","pashchAta","akShara","key1","key2"];let c=`#${h} table tbody tr`;this.bhaNDAra={sahayika:k(`#${h} table+div`)[0],key1:k(`${c}:nth-child(1) td:nth-child(2)`)[0],key2:k(`${c}:nth-child(2) td:nth-child(2)`)[0],pashchAta:k(`${c}:nth-child(1) td`),akShara:k(`${c}:nth-child(2) td`),table:k(`#${h} table`),tbody:[k(`${c}:nth-child(1)`)[0],k(`${c}:nth-child(2)`)[0]]},this.adhar=0;let d=k(`${c}:nth-child(2) td:nth-child(1)`).children();this.ins_button=[k(d[1]),k(d[0])],this.ins_sthiti=1,this.ins_button[this.ins_sthiti].show(),this.ins_button[0].on("click",()=>this.change_ins(0)),this.ins_button[1].on("click",()=>this.change_ins(1)),1==this.ins_sthiti&&(this.bhaNDAra.sahayika.style.display="none"),this.objs={down:k(d[0]),up:k(d[1]),icon:k(`${c}:nth-child(1) td:nth-child(1) a`)}}k("body").on("click",j=>{let c=e,d=c.sahayika,g=d.bhaNDAra;if("none"==d.elm.css("display"))return;let f=j.target,h=k(f).parents(),i=-1!=h.indexOf(d.elm[0]);if(h=k(f).parent()[0],this.k.in(g.tbody,h)&&!this.k.in([g.key1,g.key2],f)){i=!0;let a=d.adhar;for(let l of f.value)if(this.k.in(["input","textarea"],a[0].tagName.toLowerCase())){c.from_click=!0;let b=void 0==a.attr("lipi-lang")?this.k.k.script:a.attr("lipi-lang");if(b=this.k.normalize(b),!this.k.in(this.k.langs,b))return"error";c.prakriyA({text:l,typing:1,lang:b,mode:void 0==a.attr("lipi-mode")?this.k.akSharAH[b].sa:a.attr("lipi-mode"),element:a})}}i||c.clear_all_val(!0)})},1)}hide_other(){let a=e.sahayika;1==a.c&&a.elm.hide(),a.c--}change_ins(b){let a=e.sahayika;a.ins_button[b].hide();let c=Math.abs(b-1);a.ins_sthiti=c,a.ins_button[Math.abs(b-1)].show();let d=a.bhaNDAra.sahayika;a.set_labels(1,0==c?a.ins_msg:""),d.style.display=1==c?"":"block"}show(d){if("on"!=d.elm.attr("lekhan-sahayika"))return;this.reset_capital_status=!1;let a=this.k,D=d.key[1],b=d.key[0],t=d.mAtrA,o=d.special_cap,p=d.lang,E=d.sa;o[0]&&(this.pUrvavarNa=[[a.akSharAH[p][o[1][0]][o[1][0]][0],"",o[1][1],],o[1][0]]),this.adhar=d.elm;let x=d.elm.caret("offset"),F=x.top,G=x.height,H=x.left;if(!a.in(["input","textarea"],d.elm[0].tagName.toLowerCase())){let I=new l.CaretPos(d.elm[0]);this.abhisthAnam=I.getPos()+2}this.elm[0].style.top=`${F+G}px`,this.elm[0].style.left=`${H+8}px`;let u=["",!1];a.in(["Urdu","Romanized","Normal"],p)||(u=[a.akSharAH[p]["."][".x"][0],1==E]);let c=new Map,g=a.akSharAH[p][b[0]],m=0;for(let i of D)if(b+i in g){for(let y of(c.set(i,g[b+i]),a.last(g[b+i],-2)))b+i+y in g&&(c.set(i+y,g[b+i+y]),m++);m++}let z=0,B=[0,0];if("cap"in d){B[0]=m;let j=a.to_upper(b),n=a.akSharAH[p][j];c.set(b+b,n[j]);let J=a.last(c.get(b+b),-2);for(let k of J)if(j+k in n){for(let A of(c.set(b+b+k,n[j+k]),a.last(n[j+k],-2)))j+k+A in n&&(c.set(b+b+k+A,n[j+k+A]),m++);m++}B[1]=m+1}if((a.in([1,3],a.last(this.pUrvavarNa[0]))||t)&&0==a.last(g[b])){let q=this.pUrvavarNa[0][0]+g[b][1];3==a.last(this.pUrvavarNa[0])&&"a"!=b&&(q=a.substring(q,0,-2)+a.last(q)+a.last(q,-2)),this.set_labels(4,this.pUrvavarNa[1]+b),this.set_labels(5,q)}else{this.set_labels(4,b);let r=g[b][0]+(a.in([1,3],a.last(g[b]))?u[0]:"");3==a.last(g[b])&&(r=a.substring(r,0,-2)+a.last(r)+a.last(r,-2)),this.set_labels(5,r)}let C=0;for(let h of c.keys()){if(t&&a.in([1,2],a.last(c.get(h)))){C++;continue}this.set_labels(2,h,z);let f=c.get(h)[0];0==a.last(c.get(h))&&a.in([1,3],a.last(this.pUrvavarNa[0]))&&(f=c.get(h)[1]),a.in([1,3],a.last(c.get(h)))&&u[1]&&(f+=u[0],3==a.last(c.get(h))&&(f=a.substring(f,0,-2)+a.last(f)+a.last(f,-2))),(a.in([1,3],a.last(this.pUrvavarNa[0]))||t)&&0==a.last(c.get(h))&&(f=this.pUrvavarNa[0][0]+f,3==a.last(this.pUrvavarNa[0])&&(f=a.substring(f,0,-2)+a.last(f)+a.last(f,-2))),this.set_labels(3,f,z),z++}let s=0;for(let K of c.keys())s++;if((s-=C)>=this.idAnIma)for(let v=this.idAnIma;v<s;v++)this.show_elm(1,v),this.show_elm(2,v);else for(let w=s;w<this.idAnIma;w++)this.hide_elm(1,w),this.hide_elm(2,w);this.idAnIma=s,this.c++,t||(this.pUrvavarNa=[g[b],b]),this.elm.show(),"cap"in d&&(this.d++,this.reset_capital_status=!0,setTimeout(function(){!function(c){let a=e.sahayika;if(a.d--,a.reset_capital_status){if(0==a.d)for(let b=c[0];b<c[1];b++)a.set_labels(2,"",b),a.set_labels(3,"",b),a.hide_elm(1,b),a.hide_elm(2,b),a.idAnIma--;e.capital=[0,"",-1,-1,0,0,!1]}}(B)},4e3));let L=this.hide_other;setTimeout(function(){L()},15e3)}hide_elm(a,b){this.bhaNDAra[["pashchAta","akShara"][a-1]][b+2].style.removeProperty("display")}show_elm(a,b){this.bhaNDAra[["pashchAta","akShara"][a-1]][b+2].style.display="table-cell"}set_labels(a,c,b=-1){-1!=b&&(3==a||2==a)?(b+=2,a--,this.bhaNDAra[this.bhaNDAra_index[a]][b].innerHTML=c,2==a?this.bhaNDAra.pashchAta[b].title=c:1==a&&(this.bhaNDAra.akShara[b].title=c,this.bhaNDAra.akShara[b].value=c,this.bhaNDAra.pashchAta[b].value=c)):this.bhaNDAra[this.bhaNDAra_index[a-1]].innerHTML=c}set_lang(a){let b=()=>{let b=this.display[a];for(let c in this.ins_msg=this.k.text_to_html(b.ins,"li"),this.elm.attr("title",b.title),this.objs)this.objs[c].attr("title",b[c]);0==this.ins_sthiti&&this.set_labels(1,this.ins_msg)};a in this.display?b():l.get(`${this.k.sanchit}/sahayika/${a}.json`,{dataType:"json",success:c=>{this.display[a]=c,b()}})}}class j{constructor(a){this.sel=a,this.elm=[],this.init()}init(){let a=this.sel,b=[];b="object"==typeof a?"innerHTML"in a?[a]:a:document.querySelectorAll(a),this.length=b.length;for(let c=0;c<this.length;c++)this[c]=b[c];return this.elm=b,this}html(){let a=arguments;if(0==this.length)return this;if(0==a.length)return this[0].innerHTML;if(1==a.length){for(let b of this.elm)b.innerHTML=a[0];return this}}text(){let a=arguments;if(0==this.length)return this;if(0==a.length)return this[0].innerText;if(1==a.length){for(let b of this.elm)b.innerText=a[0];return this}}val(){let a=arguments;if(0==this.length)return this;if(0==a.length)return this[0].value;if(1==a.length){for(let b of this.elm)b.value=a[0];return this}}attr(){let a=arguments;if(0==this.length)return this;if(1==a.length){if("object"!=typeof a[0])return this[0].getAttribute(a[0]);for(let c of this.elm)for(let b in a[0])c.setAttribute(b,a[0][b]);return this}if(2==a.length){for(let d of this.elm)d.setAttribute(a[0],a[1]);return this}}removeAttr(){let a=arguments;for(let b of this.elm)b.removeAttribute(a[0]);return this}trigger(){let a=arguments;for(let b of this.elm)b.dispatchEvent(new Event(a[0]));return this}on(){let a=arguments;for(let b of this.elm)b.addEventListener(a[0],a[1]);return this}append(){let a=arguments;for(let b of this.elm)b.insertAdjacentHTML("beforeend",a[0]);return this}appendHTML(){let b=arguments,a=l.make(b[0]);for(let c of this.elm)c.insertAdjacentElement("beforeend",a);return k(a)}afterHTML(){let b=arguments,a=l.make(b[0]);for(let c of this.elm)c.insertAdjacentElement("afterend",a);return k(a)}after(){let a=arguments;for(let b of this.elm)b.insertAdjacentHTML("afterend",a[0]);return this}before(){let a=arguments;for(let b of this.elm)b.insertAdjacentHTML("beforebegin",a[0]);return this}addClass(){let a=arguments;for(let b of this.elm)b.classList.add(a[0]);return this}removeClass(){let a=arguments;for(let b of this.elm)b.classList.remove(a[0]);return this}toggleClass(){let a=arguments;for(let b of this.elm)b.classList.toggle(a[0]);return this}focus(){return arguments,0==this.length||this[0].focus(),this}css(){let a=arguments;if(0==this.length)return this;if(1==a.length){if("object"==typeof a[0]){for(let c of this.elm)Object.assign(c.style,a[0]);return this}{let b=getComputedStyle(this[0]);return void 0!=b&&null!=b?b[a[0]]:""}}if(2==a.length){for(let d of this.elm)d.style[a[0]]=a[1];return this}}removeCss(){let a=arguments;for(let b of this.elm)b.style.removeProperty(a[0]);return this}check(){let a=arguments;if(0==this.length)return this;if(0==a.length)this[0].checked;else if(1==a.length){for(let b of this.elm)b.checked=a[0];return this}}show(){let c={div:"block",span:"inline"};for(let d of this.elm){let a=k(d);if("none"==a.css("display")&&(a.removeCss("display"),"none"==a.css("display"))){let b=d.tagName.toLowerCase();if(b in c)a.css("display",c[b]);else{let e=k("body").appendHTML(`<${b}></${b}>`);a.css("display",e.css("display")),e.remove()}}}return this}hide(){for(let a of this.elm)"none"!=k(a).css("display")&&(a.style.display="none");return this}children(){let a=[];for(let b of this.elm)for(let c of b.children)a.push(c);return a}remove(){for(let a of this.elm)a.remove();return this}find(){let d=arguments;if(0==this.length)return this;let a=k(l.make("<div></div>")),c=this[0].querySelectorAll(d[0]);a.length=c.length;for(let b=0;b<a.length;b++)a[b]=c[b];return a.elm=c,a}width(){return 0==this.length?this:this[0].offsetWidth}height(){return 0==this.length?this:this[0].offsetHeight}parent(){return 0==this.length?this:k(this[0].parentElement)}parents(){if(0==this.length)return k([]);for(var a=this[0],b=[];a;)b.push(a),a=a.parentNode;return b}index(a){return this.elm.indexOf(a)}offset(d){if(0==this.length)return{top:0,left:0};var b,c,a=this[0];return a?a.getClientRects().length?(b=a.getBoundingClientRect(),c=a.ownerDocument.defaultView,{top:b.top+c.pageYOffset,left:b.left+c.pageXOffset}):{top:0,left:0}:void 0}scrollLeft(){return 0==this.length?0:this[0].scrollLeft}scrollTop(){return 0==this.length?0:this[0].scrollTop}prop(){let a=arguments;return this.attr(a)}position(a=null){if(0==this.length)return{top:0,left:0};let b=this[0].getBoundingClientRect();var a=this[0].parentElement.getBoundingClientRect();return{top:b.top-a.top,left:b.left-a.left}}resize(){if(0==this.length)return this;for(let b of this.elm){let c=k(b);b.style.width="";let d=b.innerHTML,a=b.outerHTML;a=l.replace_all(a,d,""),a=l.replace_all(a,"id=","idk="),a=k("body").appendHTML(a).show(),a.html(`<option>${c.find("option:checked").html()}</option>`);let e=a.width();a.remove(),b.style.width=`${e+7}px`}return this}}class c{make(b){var a=document.createElement("div");return a.innerHTML=b.trim(),a.firstChild}ajax(g,a={}){let b=new XMLHttpRequest;"xhr"in a&&(b=a.xhr());let c=!("async"in a)||a.async,h="type"in a?a.type:"GET";b.open(h,g,c);let d="data"in a?a.data:null;if("dataType"in a&&(b.responseType=a.dataType),"json"in a&&(d=JSON.stringify(a.json),b.setRequestHeader("content-type","application/json;charset=utf-8")),"contentType"in a&&b.setRequestHeader("content-type",a.contentType),"headers"in a)for(let e in a.headers)b.setRequestHeader(e,a.headers[e]);b.send(d);let i=function(){let d=function(c,d=!1){let a=b.getResponseHeader(c);return null==a|| void 0==a?void 0:d?a.split(";")[0]:a}("content-type",!0),c=b.response;return 2==parseInt(b.status/100)?("application/json"==d&&"json"!=b.responseType&&(c=JSON.parse(c)),"success"in a&&a.success(c,b,b.status,d)):"error"in a&&a.error(c,b,b.status,d),c};if(!c)return i();{let f=new Promise(a=>{b.onerror=()=>a("Network Error"),b.onload=()=>a(i())});return f.xhr=b,f}}get(b,a={}){return a.type="GET",this.ajax(b,a)}post(b,a={}){return a.type="POST",this.ajax(b,a)}getScript(b,c=null){let a=document.createElement("script");a.src=b,k("body")[0].appendChild(a),a.onload=()=>{a.remove(),null!=c&&c()}}isPlainObject(a){return"object"==typeof a&&a.constructor==Object}in(a,b){return -1!=a.indexOf(b)}replace_all(b,a,c){a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var d=new RegExp(a,"g");return b.replace(d,c)}last(a,b=-1){return null==a|| void 0==a?"":a[a.length+b]}time(){return new Date().getTime()/1e3}dict_rev(a){let b={};for(let c in a)b[a[c]]=c;return b}substring(b,c,a=null){return(null==a&&(a=b.length),a>0)?b.substring(c,a):a<0?b.substring(c,b.length+a):void 0}format(b,c){for(let a=0;a<c.length;a++)b=this.replace_all(b,`{${a}}`,c[a]);return b}json_to_address(a){if(null==a| void 0==a)return[];let b=[];function e(a,e,f){let h=typeof e[a],g=`${f}/${a}`;Array.isArray(a)?d(e[a],g):"object"==h?c(e[a],g):b.push(`${f}/${a}`)}function c(a,b=""){for(let c in a)e(c,a,b)}function d(b,c=""){for(let a=0;a<b.length;a++)e(a,b,c)}return"object"==typeof a?a=c(a):Array.isArray(a)&&(a=d(a)),b}val_from_adress(b,d){let a=d;if("/"==b)return a;for(let e of b=b.substring(1).split("/")){let c=e;Array.isArray(a)&&(c=parseInt(c)),a=a[c]}return a}set_val_from_adress(d,e,g=null,h=!1){let a=e,f=(d=d.substring(1).split("/")).length;for(let c=0;c<f;c++){let b=d[c];Array.isArray(a)&&(b=parseInt(b)),c==f-1?a[b]=g:(b in a||!h||(a[b]={}),a=a[b])}return e}}void 0!=k&&(k=void 0);var k=function(b){let a=new j(b);return a.init(),a};void 0!=l&&(l=void 0);var l=new c;let d=new a,e=new b;d.k=e,function(b){var a={exports:{}};b(a),l.CaretPos=a.exports}(function(a){"use strict";var c=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=function(){function a(b){(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")})(this,a),this.target=b,this.isContentEditable=b&&b.contentEditable}return c(a,[{key:"getPos",value:function(){if(document.activeElement!==this.target)return -1;if(this.isContentEditable){this.target.focus();var a=document.getSelection().getRangeAt(0),b=a.cloneRange();return b.selectNodeContents(this.target),b.setEnd(a.endContainer,a.endOffset),b.toString().length}return this.target.selectionStart}},{key:"setPos",value:function(a){if(this.isContentEditable){if(a>=0){var c=window.getSelection(),b=this.createRange(this.target,{count:a});b&&(b.collapse(!1),c.removeAllRanges(),c.addRange(b))}}else this.target.setSelectionRange(a,a)}},{key:"createRange",value:function(a,b,c){if(c||((c=document.createRange()).selectNode(a),c.setStart(a,0)),0===b.count)c.setEnd(a,b.count);else if(a&&b.count>0){if(a.nodeType===Node.TEXT_NODE)a.textContent.length<b.count?b.count-=a.textContent.length:(c.setEnd(a,b.count),b.count=0);else for(var d=0;d<a.childNodes.length&&(c=this.createRange(a.childNodes[d],b,c),0!==b.count);d++);}return c}}]),a}();a.exports=b}),function(a){a()}(function(){"use strict";var b,c,f,d,e,g,h,i,k;b=function(){function a(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return a.prototype.setPos=function(a){var b,c,d,e;return(e=i.getSelection())&&(d=0,c=!1,(b=function(i,m){var a,k,f,l,j,h;for(f=0,j=m.childNodes,h=[],l=j.length;f<l&&(a=j[f],!c);f++)if(3===a.nodeType){if(d+a.length>=i){c=!0,(k=g.createRange()).setStart(a,i-d),e.removeAllRanges(),e.addRange(k);break}h.push(d+=a.length)}else h.push(b(i,a));return h})(a,this.domInputor)),this.domInputor},a.prototype.getIEPosition=function(){return this.getPosition()},a.prototype.getPosition=function(){var b,a;return a=this.getOffset(),b=this.$inputor.offset(),a.left-=b.left,a.top-=b.top,a},a.prototype.getPos=function(){var a,c,b;if(b=this.range())return(a=b.cloneRange()).selectNodeContents(this.domInputor),a.setEnd(b.endContainer,b.endOffset),c=a.toString().length,a.detach(),c},a.prototype.getOffset=function(f){var a,b,c,d,e;return i.getSelection&&(c=this.range())&&(c.endOffset-1>0&&c.endContainer!==this.domInputor&&((a=c.cloneRange()).setStart(c.endContainer,c.endOffset-1),a.setEnd(c.endContainer,c.endOffset),b={height:(d=a.getBoundingClientRect()).height,left:d.left+d.width,top:d.top},a.detach()),b&&(null!=b?b.height:void 0)!==0||(a=c.cloneRange(),e=g.createTextNode("|"),a.insertNode(e),a.selectNode(e),b={height:(d=a.getBoundingClientRect()).height,left:d.left,top:d.top},e.remove(),a.detach())),b&&(b.top+=i.scrollY,b.left+=i.scrollX),b},a.prototype.range=function(){var a;return i.getSelection?(a=i.getSelection()).rangeCount>0?a.getRangeAt(0):null:void 0},a}(),c=function(){function a(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return a.prototype.getPos=function(){return this.domInputor.selectionStart},a.prototype.setPos=function(b){var a,c;return a=this.domInputor,g.selection?((c=a.createTextRange()).move("character",b),c.select()):a.setSelectionRange&&a.setSelectionRange(b,b),a},a.prototype.getIEOffset=function(b){var c,a,d,e;return a=this.domInputor.createTextRange(),b||(b=this.getPos()),a.move("character",b),d=a.boundingLeft,e=a.boundingTop,c=a.boundingHeight,{left:d,top:e,height:c}},a.prototype.getOffset=function(d){var b,a,c;return(b=this.$inputor,g.selection)?(a=this.getIEOffset(d),a.top+=i.scrollY+b.scrollTop(),a.left+=i.scrollX+b.scrollLeft(),a):(a=b.offset(),c=this.getPosition(d),{left:a.left+c.left-b.scrollLeft(),top:a.top+c.top-b.scrollTop(),height:c.height})},a.prototype.getPosition=function(b){var c,e,d,a,g,h;return c=this.$inputor,d=function(a){return a=a.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(a=a.replace(/\s/g,"&nbsp;")),a},void 0===b&&(b=this.getPos()),h=c.val().slice(0,b),e=c.val().slice(b),a=d(h),a+="<span id='caret' style='position: relative; display: inline;'></span>",a+="<span id='caret_h' style='position: relative; display: inline;'>|</span>",a+=d(e),g=new f(c),g.create(a).rect()},a.prototype.getIEPosition=function(f){var c,b,a,d,e;return a=this.getIEOffset(f),b=this.$inputor.offset(),d=a.left-b.left,e=a.top-b.top,c=a.height,{left:d,top:e,height:c}},a}(),f=function(){function a(a){this.$inputor=a}return a.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],a.prototype.mirrorCss=function(){var a;for(let b of(a={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"==this.$inputor[0].tagName&&this.css_attr.push("width"),this.css_attr))a[b]=this.$inputor.css(b);return a.position="relative",a.display="block",a},a.prototype.create=function(a){return this.$mirror=this.$inputor.afterHTML("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(a),this},a.prototype.rect=function(){var a,b;return b={left:(a=this.$mirror.find("#caret").position()).left,top:a.top,height:this.$mirror.find("#caret_h").height()},this.$mirror.remove(),b},a}(),d={contentEditable:function(a){return!!(a[0].contentEditable&&"true"===a[0].contentEditable)}},e={pos:function(a){return a||0===a?this.setPos(a):this.getPos()},position:function(a){return g.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){return this.getOffset(a)}},g=null,i=null,h=null,k=function(b){var a;return(a=null!=b?b.iframe:void 0)?(h=a,i=a.contentWindow,g=a.contentDocument||i.document):(h=void 0,i=window,g=document)};let a=j.prototype;a.caret=function(f,a,h){var g;if(e[f])return l.isPlainObject(a)?(k(a),a=void 0):k(h),g=d.contentEditable(this)?new b(this):new c(this),e[f].apply(g,[a])},a.caret.EditableCaret=b,a.caret.InputCaret=c,a.caret.Utils=d,a.caret.apis=e})